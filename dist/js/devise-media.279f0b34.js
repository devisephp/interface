(self["webpackChunkdevisephp_interface"]=self["webpackChunkdevisephp_interface"]||[]).push([[383],{1436:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return d}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dvs-w-full dvs-flex dvs-flex-wrap dvs-items-center"},[""!==t.currentDirectory?[i("div",{staticClass:"dvs-cursor-pointer dvs-mr-1",on:{click:function(e){return t.goToHome()}}},[t._v("Home")]),t._l(t.directoriesObj,(function(e,s){return[i("div",{key:s,staticClass:"dvs-flex dvs-items-center"},[i("span",{staticClass:"dvs-mr-1 dvs-text-gray-500"},[i("chevron-right-icon")],1),i("span",{staticClass:"dvs-cursor-pointer dvs-mr-1",on:{click:function(e){return t.chooseDirectory(s)}}},[t._v(t._s(e))])])]}))]:t._e()],2)},a=[],n={components:{ChevronRightIcon:()=>i.e(952).then(i.bind(i,1541))},props:{currentDirectory:{type:String,required:!0}},computed:{directoriesObj(){const t={};let e="";const i=this.currentDirectory.split(".");for(let s=0;s<i.length;s+=1)e+=i[s],t[e]=i[s],e+=".";return t}},methods:{chooseDirectory(t){this.$emit("chooseDirectory",t)},goToHome(){this.chooseDirectory("")}}},r=n,o=i(1001),l=(0,o.Z)(r,s,a,!1,null,null,null),d=l.exports},1021:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return d}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.showControl?i("div",{staticClass:"dvs-blocker dvs-z-10",style:{backgroundColor:"transparent"},on:{click:t.toggleShowControl}}):t._e(),i("div",{staticClass:"dvs-relative"},[i("div",{staticClass:"dvs-cursor-pointer dvs-text-xs dvs-border dvs-rounded dvs-flex dvs-flex-wrap dvs-justify-center dvs-items-center dvs-p-2 dvs-m-1",class:{"dvs-bg-gray-400":t.showControl},on:{click:t.toggleShowControl}},[t._t("button",(function(){return[t._v("Button")]}))],2),t.showControl?i("div",{staticClass:"dvs-absolute dvs-text-sm dvs-bg-white dvs-rounded dvs-p-4 dvs-shadow dvs-z-20",staticStyle:{"min-width":"200px"}},[t._t("control",null,{toggleShowControl:t.toggleShowControl})],2):t._e()])])},a=[],n={name:"MediaEditorControl",props:{value:{required:!0,type:Object}},data(){return{showControl:!1}},computed:{edits:{get(){return this.value},set(t){this.$emit("input",t)}}},methods:{toggleShowControl(){this.showControl=!this.showControl}}},r=n,o=i(1001),l=(0,o.Z)(r,s,a,!1,null,null,null),d=l.exports},3086:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return u}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dvs-flex dvs-items-center dvs-bg-gray-200 dvs-p-2"},[i("div",{staticClass:"dvs-uppercase dvs-text-xs dvs-font-bold dvs-ml-8 dvs-mr-4 dvs-text-gray-600"},[t._v(" Edits for "+t._s(t.activeImage.name)+" ")]),i("editor-control",{scopedSlots:t._u([{key:"button",fn:function(){return[i("image-icon")]},proxy:!0},{key:"control",fn:function(){return[i("fieldset",{staticClass:"dvs-fieldset dvs-mb-4"},[i("label",[t._v("Select a different image for "+t._s(t.activeImage.name))]),i("button",{staticClass:"dvs-btn dvs-btn-primary",on:{click:t.selectSizeImage}},[t._v(" Select image ")])])]},proxy:!0}]),model:{value:t.edits,callback:function(e){t.edits=e},expression:"edits"}}),i("editor-control",{scopedSlots:t._u([{key:"button",fn:function(){return[i("maximize-icon")]},proxy:!0},{key:"control",fn:function(){return[i("fieldset",{staticClass:"dvs-fieldset dvs-mb-4"},[i("label",[t._v("Width")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.edits.w,expression:"edits.w",modifiers:{number:!0}}],staticClass:"dvs-w-full",attrs:{type:"text"},domProps:{value:t.edits.w},on:{input:function(e){e.target.composing||t.$set(t.edits,"w",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),i("fieldset",{staticClass:"dvs-fieldset dvs-mb-4"},[i("label",[t._v("Height")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.edits.h,expression:"edits.h",modifiers:{number:!0}}],staticClass:"dvs-w-full",attrs:{type:"text"},domProps:{value:t.edits.h},on:{input:function(e){e.target.composing||t.$set(t.edits,"h",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),i("fieldset",[i("div",{staticClass:"flex"},[i("button",{staticClass:"dvs-btn dvs-w-full dvs-btn-sm dvs-mr-2",class:{"dvs-bg-green-500 dvs-text-white":t.lockAspectRatio,"dvs-bg-gray-200":!t.lockAspectRatio},on:{click:function(e){t.lockAspectRatio=!t.lockAspectRatio}}},[i("lock-icon",{directives:[{name:"show",rawName:"v-show",value:t.lockAspectRatio,expression:"lockAspectRatio"}]}),i("unlock-icon",{directives:[{name:"show",rawName:"v-show",value:!t.lockAspectRatio,expression:"!lockAspectRatio"}]})],1),i("button",{staticClass:"dvs-btn dvs-w-full dvs-btn-secondary dvs-btn-sm",on:{click:t.setCustomSizeToOriginal}},[t._v(" Reset Dimensions ")])])])]},proxy:!0}]),model:{value:t.edits,callback:function(e){t.edits=e},expression:"edits"}}),i("editor-control",{scopedSlots:t._u([{key:"button",fn:function(){return[i("crop-icon")]},proxy:!0},{key:"control",fn:function(e){return["custom"===t.edits.fit?i("fieldset",{staticClass:"dvs-fieldset dvs-mb-4"},[i("label",[t._v("Toggle Cropping")]),i("button",{staticClass:"dvs-btn",class:t.croppingButtonStyle,on:{click:function(i){return t.startCropping(e.toggleShowControl)}}},[i("crop-icon")],1)]):t._e(),i("fieldset",{staticClass:"dvs-fieldset"},[i("label",[t._v("Fitting")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.edits.fit,expression:"edits.fit"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.edits,"fit",e.target.multiple?i:i[0])}}},[i("option",{domProps:{value:null}},[t._v("No Crop")]),i("option",{attrs:{value:"custom"}},[t._v("Custom")]),i("option",{attrs:{value:"max"}},[t._v("Fit")]),i("option",{attrs:{value:"fill"}},[t._v("Fill")]),i("option",{attrs:{value:"stretch"}},[t._v("Stretch")]),i("option",{attrs:{value:"crop"}},[t._v("Crop Center (Most Used)")]),i("option",{attrs:{value:"crop-left"}},[t._v("Crop Center Left")]),i("option",{attrs:{value:"crop-right"}},[t._v("Crop Center Right")]),i("option",{attrs:{value:"crop-top"}},[t._v("Crop Bottom")]),i("option",{attrs:{value:"crop-top-left"}},[t._v("Crop Bottom Left")]),i("option",{attrs:{value:"crop-top-right"}},[t._v("Crop Bottom Right")]),i("option",{attrs:{value:"crop-bottom"}},[t._v("Crop Top")]),i("option",{attrs:{value:"crop-bottom-left"}},[t._v("Crop Top Left")]),i("option",{attrs:{value:"crop-bottom-right"}},[t._v("Crop Top Right")])])]),"fill"===t.edits.fit?i("fieldset",{staticClass:"dvs-fieldset"},[i("label",[t._v("Background Color")]),i("color-picker",{on:{cancel:function(e){t.edits.bg=null}},model:{value:t.editorColor,callback:function(e){t.editorColor=e},expression:"editorColor"}})],1):t._e()]}}]),model:{value:t.edits,callback:function(e){t.edits=e},expression:"edits"}}),i("editor-control",{scopedSlots:t._u([{key:"button",fn:function(){return[i("star-icon")]},proxy:!0},{key:"control",fn:function(){return[i("fieldset",{staticClass:"dvs-fieldset"},[i("label",[t._v("Quality")]),i("div",{staticClass:"dvs-flex"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.edits.q,expression:"edits.q"}],attrs:{type:"range",min:"0",max:"100",step:"5"},domProps:{value:t.edits.q},on:{dblclick:function(e){t.edits.q=null},__r:function(e){return t.$set(t.edits,"q",e.target.value)}}}),i("div",{staticClass:"dvs-font-bold dvs-text-xs dvs-pl-2"},[t._v(t._s(t.edits.q))])])])]},proxy:!0}]),model:{value:t.edits,callback:function(e){t.edits=e},expression:"edits"}}),i("editor-control",{scopedSlots:t._u([{key:"button",fn:function(){return[i("aperture-icon")]},proxy:!0},{key:"control",fn:function(){return[i("fieldset",{staticClass:"dvs-fieldset"},[i("label",[t._v("Sharpen")]),i("div",{staticClass:"dvs-flex"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.edits.sharp,expression:"edits.sharp"}],attrs:{type:"range",min:"0",max:"100",step:"1"},domProps:{value:t.edits.sharp},on:{dblclick:function(e){t.edits.sharp=null},__r:function(e){return t.$set(t.edits,"sharp",e.target.value)}}}),i("div",{staticClass:"dvs-font-bold dvs-text-xs dvs-pl-2"},[t._v(t._s(t.edits.sharp))])])])]},proxy:!0}]),model:{value:t.edits,callback:function(e){t.edits=e},expression:"edits"}}),i("editor-control",{scopedSlots:t._u([{key:"button",fn:function(){return[i("rotation-icon")]},proxy:!0},{key:"control",fn:function(){return[i("fieldset",{staticClass:"dvs-fieldset"},[i("label",[t._v("Rotation")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.edits.or,expression:"edits.or"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.edits,"or",e.target.multiple?i:i[0])}}},[i("option",{domProps:{value:null}},[t._v("No Rotation")]),i("option",{attrs:{value:"90"}},[t._v("90° Counter Clockwise")]),i("option",{attrs:{value:"180"}},[t._v("180°")]),i("option",{attrs:{value:"270"}},[t._v("270° Counter Clockwise")]),i("option",{attrs:{value:"auto"}},[t._v("Auto (Reads EXIF Data)")])])])]},proxy:!0}]),model:{value:t.edits,callback:function(e){t.edits=e},expression:"edits"}}),i("editor-control",{scopedSlots:t._u([{key:"button",fn:function(){return[i("flip-icon")]},proxy:!0},{key:"control",fn:function(){return[i("fieldset",{staticClass:"dvs-fieldset"},[i("label",[t._v("Rotation")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.edits.flip,expression:"edits.flip"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.edits,"flip",e.target.multiple?i:i[0])}}},[i("option",{domProps:{value:null}},[t._v("No Flip")]),i("option",{attrs:{value:"v"}},[t._v("Vertical")]),i("option",{attrs:{value:"h"}},[t._v("Horizontal")]),i("option",{attrs:{value:"both"}},[t._v("Vertical & Horizontal")])])])]},proxy:!0}]),model:{value:t.edits,callback:function(e){t.edits=e},expression:"edits"}}),i("editor-control",{scopedSlots:t._u([{key:"button",fn:function(){return[i("zap-icon")]},proxy:!0},{key:"control",fn:function(){return[i("fieldset",{staticClass:"dvs-fieldset"},[i("label",[t._v("Effects")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.edits.filt,expression:"edits.filt"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.edits,"filt",e.target.multiple?i:i[0])}}},[i("option",{domProps:{value:null}},[t._v("No Effect")]),i("option",{attrs:{value:"greyscale"}},[t._v("Greyscale")]),i("option",{attrs:{value:"sepia"}},[t._v("Sepia")])])])]},proxy:!0}]),model:{value:t.edits,callback:function(e){t.edits=e},expression:"edits"}}),i("editor-control",{scopedSlots:t._u([{key:"button",fn:function(){return[i("sliders-icon")]},proxy:!0},{key:"control",fn:function(){return[i("fieldset",{staticClass:"dvs-fieldset"},[i("label",[t._v("Brightness")]),i("div",{staticClass:"dvs-flex"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.edits.bri,expression:"edits.bri"}],attrs:{type:"range",min:"-100",max:"100",step:"1"},domProps:{value:t.edits.bri},on:{dblclick:function(e){t.edits.bri=null},__r:function(e){return t.$set(t.edits,"bri",e.target.value)}}}),i("div",{staticClass:"dvs-font-bold dvs-text-xs dvs-pl-2"},[t._v(t._s(t.edits.bri))])])]),i("fieldset",{staticClass:"dvs-fieldset"},[i("label",[t._v("Contrast")]),i("div",{staticClass:"dvs-flex"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.edits.con,expression:"edits.con"}],attrs:{type:"range",min:"-100",max:"100",step:"1"},domProps:{value:t.edits.con},on:{dblclick:function(e){t.edits.con=null},__r:function(e){return t.$set(t.edits,"con",e.target.value)}}}),i("div",{staticClass:"dvs-font-bold dvs-text-xs dvs-pl-2"},[t._v(t._s(t.edits.con))])])]),i("fieldset",{staticClass:"dvs-fieldset"},[i("label",[t._v("Gamma")]),i("div",{staticClass:"dvs-flex"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.edits.gam,expression:"edits.gam"}],attrs:{type:"range",min:"0.1",max:"9.99",step:"0.01"},domProps:{value:t.edits.gam},on:{dblclick:function(e){t.edits.gam=null},__r:function(e){return t.$set(t.edits,"gam",e.target.value)}}}),i("div",{staticClass:"dvs-font-bold dvs-text-xs dvs-pl-2"},[t._v(t._s(t.edits.gam))])])]),i("fieldset",{staticClass:"dvs-fieldset"},[i("label",[t._v("Pixelate")]),i("div",{staticClass:"dvs-flex"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.edits.pixel,expression:"edits.pixel"}],attrs:{type:"range",min:"0",max:"20",step:"1"},domProps:{value:t.edits.pixel},on:{dblclick:function(e){t.edits.pixel=null},__r:function(e){return t.$set(t.edits,"pixel",e.target.value)}}}),i("div",{staticClass:"dvs-font-bold dvs-text-xs dvs-pl-2"},[t._v(t._s(t.edits.pixel))])])])]},proxy:!0}]),model:{value:t.edits,callback:function(e){t.edits=e},expression:"edits"}})],1)},a=[],n=i(629);const r=i(953).Z,o=i(7621);var l={name:"MediaEditorControls",components:{"color-picker":r,EditorControl:()=>Promise.all([i.e(953),i.e(383)]).then(i.bind(i,1021)),CropIcon:()=>i.e(952).then(i.bind(i,1330)),LockIcon:()=>i.e(952).then(i.bind(i,4060)),UnlockIcon:()=>i.e(952).then(i.bind(i,5820)),StarIcon:()=>i.e(952).then(i.bind(i,2823)),ApertureIcon:()=>i.e(952).then(i.bind(i,3661)),RotationIcon:()=>i.e(952).then(i.bind(i,8891)),FlipIcon:()=>i.e(952).then(i.bind(i,540)),ZapIcon:()=>i.e(952).then(i.bind(i,6381)),SlidersIcon:()=>i.e(952).then(i.bind(i,798)),ImageIcon:()=>i.e(952).then(i.bind(i,1598)),MaximizeIcon:()=>i.e(952).then(i.bind(i,3320))},props:{value:{required:!0,type:Object},activeImage:{required:!0,type:Object}},data(){return{lockAspectRatio:!1}},computed:{...(0,n.rn)("devise",["isCropping"]),edits(){return this.value},editorColor:{get(){return null===this.edits.bg?"#ffffff":o(this.edits.bg).toRgb()},set(t){this.edits.bg=t.hex}},croppingButtonStyle(){return this.isCropping?"dvs-btn-primary":"dvs-btn-ghost"},width(){return this.edits.w},height(){return this.edits.h}},watch:{width(t,e){if(this.lockAspectRatio){const i=this.height/e;this.edits.h=Math.round(i*t)}}},methods:{...(0,n.OI)("devise",["toggleCropping"]),selectSizeImage(){this.$emit("selectsizeimage")},setCustomSizeToOriginal(){this.lockAspectRatio=!1,this.$emit("settooriginal")},startCropping(t){this.toggleCropping(),t()}}},d=l,c=i(1001),h=(0,c.Z)(d,s,a,!1,null,null,null),u=h.exports},3872:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return c}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dvs-flex dvs-flex-col dvs-items-stretch dvs-h-screen-90 dvs-overflow-hidden dvs-relative dvs-h"},[i("div",{staticClass:"dvs-py-2 dvs-px-8 dvs-rounded-tl dvs-rounded-tr dvs-flex dvs-justify-between dvs-items-center dvs-bg-gray-300 dvs-border-b dvs-border-lighter dvs-relative"},[t._v(" Media Editor "),i("div",[i("button",{staticClass:"dvs-btn dvs-btn-primary dvs-btn-sm dvs-mr-2",on:{click:t.done}},[t._v("Done")]),i("button",{staticClass:"dvs-btn dvs-btn-ghost dvs-btn-sm",on:{click:t.cancel}},[t._v("Cancel")])])]),t.activeImage?i("div",{staticClass:"dvs-flex dvs-items-stretch"},[i("media-thumbnails",{attrs:{"default-image":t.defaultImage,"size-edits":t.sizeEdits,sizes:t.sizes,"encode-edits":t.encodeEdits,active:t.active,warning:t.showWarning},on:{select:t.setActive}}),i("div",{staticClass:"dvs-relative"},[t.sizeEdits[t.activeImage.name]?i("media-controls",{attrs:{"active-image":t.activeImage},on:{settooriginal:t.setCustomSizeToOriginal,selectsizeimage:t.selectSizeImage},model:{value:t.sizeEdits[t.activeImage.name],callback:function(e){t.$set(t.sizeEdits,t.activeImage.name,e)},expression:"sizeEdits[activeImage.name]"}}):t._e(),t.sizeEdits[t.active]?i("media-editor-preview",{attrs:{sizes:t.sizes,"custom-size":{w:t.sizeEdits[t.active].w,h:t.sizeEdits[t.active].h},active:t.active,"active-image":t.activeImage,"encode-edits":t.encodeEdits,warning:t.showWarning},on:{applycrop:t.applyCrop,removecrop:t.removeCrop}}):t._e()],1)],1):t._e()])},a=[],n=i(629),r={name:"DeviseMediaEditor",components:{MediaControls:()=>Promise.all([i.e(953),i.e(383)]).then(i.bind(i,3086)),MediaThumbnails:()=>Promise.all([i.e(953),i.e(383)]).then(i.bind(i,4666)),MediaEditorPreview:()=>Promise.all([i.e(953),i.e(383)]).then(i.bind(i,588))},props:{defaultImage:{type:String,required:!0},sizes:{type:Object,default:null},imageSettings:{type:Object,default:null}},data(){return{active:"original",defaultEdits:{q:70,or:null,flip:null,fit:"crop",bri:null,con:null,gam:null,sharp:5,pixel:null,filt:null,bg:null,url:null,crop:null,w:null,h:null,originalw:null,originalh:null},sizeEdits:{}}},computed:{activeImage(){return this.active&&"undefined"!==typeof this.sizeEdits&&this.sizeEdits[this.active]?{url:`/styled/preview/${this.sizeEdits[this.active].url}?${this.encodeEdits(this.active)}`,baseImageUrl:`/styled/preview/${this.sizeEdits[this.active].url}`,name:`${this.active}`,sizeLabel:`(${this.sizeEdits[this.active].w}x${this.sizeEdits[this.active].h})`}:{url:`/styled/preview/${this.defaultImage}`,name:"Original"}},showWarning(){return!(!this.sizeEdits[this.active]||null!==this.sizeEdits[this.active].fit&&this.sizeEdits[this.active].originalw===this.sizeEdits[this.active].w&&this.sizeEdits[this.active].originalh===this.sizeEdits[this.active].h)}},mounted(){this.setInitialActive(),this.loadImageSettings()},methods:{...(0,n.nv)("devise",["generateImages"]),done(){this.generateAndSaveImages().then((()=>{this.$emit("done")}))},cancel(){this.$emit("cancel")},setActive(t){this.active=t},setInitialActive(){if(this.sizes){const t=Object.keys(this.sizes)[0];return this.setActive(t),!0}return this.setActive("custom"),!1},getOriginalDimentions(){const t=`/styled/preview/${this.defaultImage}`,e=new Image;return e.onerror=()=>{alert(`not a valid file: ${t.type}`)},e.src=t,new Promise((t=>{e.onload=()=>{this.$nextTick((()=>{t(e)}))}}))},setCustomSizeToOriginal(){const t=this.sizeEdits[this.active];t.w=t.originalw,t.h=t.originalh},clean(t){for(const e in t)null===t[e]||void 0===t[e]?delete t[e]:"bg"===e&&(t[e]=t[e].substring(1));return t},setImage(t){this.sizeEdits[this.active].url=t.url},generateAndSaveImages(){return new Promise((()=>{window.deviseSettings.$bus.$emit("showLoadScreen","Images being generated"),this.generateImages({defaultImage:this.defaultImage,sizes:this.sizeEdits}).then((t=>(this.$emit("generatedImages",{images:t.data,settings:this.sizeEdits}),!0))).then((()=>{window.deviseSettings.$bus.$emit("hideLoadScreen")}),(()=>{window.deviseSettings.$bus.$emit("hideLoadScreen")}))}))},loadImageSettings(){this.sizes?Object.entries(this.sizes).forEach((([t,e])=>{"custom"!==t&&this.createSizeEdit(t,e)})):this.createSizeEdit("custom")},createSizeEdit(t,e){this.$set(this.sizeEdits,t,{}),this.sizeEdits[t]=Object.assign({},this.defaultEdits,this.imageSettings[t]),this.sizeEdits[t].url||(this.sizeEdits[t].url=this.defaultImage),e?(null!==this.sizeEdits[t].w&&null!==!this.sizeEdits[t].h||(this.sizeEdits[t].w=e.w,this.sizeEdits[t].h=e.h),this.sizeEdits[t].originalw=e.w,this.sizeEdits[t].originalh=e.h):null!==this.sizeEdits[t].w&&null!==!this.sizeEdits[t].h||this.getOriginalDimentions().then((e=>{this.sizeEdits[t].w=e.width,this.sizeEdits[t].h=e.height,this.sizeEdits[t].originalw=e.width,this.sizeEdits[t].originalh=e.height}))},selectSizeImage(){this.$emit("selectsizeimage",this.active)},applyCrop(t){this.$set(this.sizeEdits[this.activeImage.name],"crop",{w:t.width,h:t.height,x:t.x,y:t.y})},removeCrop(){this.$set(this.sizeEdits[this.activeImage.name],"crop",null)},encodeEdits(t){let e="";for(const i in this.sizeEdits[t])if(null!==this.sizeEdits[t][i]){""!==e&&(e+="&");let s=this.sizeEdits[t][i];"bg"===i&&(s=s.substring(1)),"crop"===i&&(s=`${s.w},${s.h},${s.x},${s.y}`),e+=`${i}=${s}`}return e}}},o=r,l=i(1001),d=(0,l.Z)(o,s,a,!1,null,null,null),c=d.exports},588:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return u}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dvs-flex-grow dvs-relative dvs-bg-gray-200"},[i("div",{staticClass:"dvs-border-l dvs-border-gray-300"},[i("div",{staticClass:"dvs-p-8"},[t.warning?i("div",{staticClass:"dvs-fixed dvs-bottom-0 dvs-left-0 dvs-mb-2 dvs-ml-2 dvs-shadow-lg"},[t._m(0)]):t._e(),t.isCropping?t._e():[i("div",{staticClass:"dvs-flex dvs-justify-center dvs-items-center",class:{"dvs-p-16":t.warning},staticStyle:{background:"repeating-linear-gradient(45deg, #606dbc, #606dbc 10px, #465298 10px, #465298 20px)"}},[i("transition",{attrs:{name:"dvs-fade"}},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.loaded,expression:"loaded"}],staticClass:" dvs-shadow-lg",attrs:{src:t.activeImage.url},on:{load:function(e){t.loaded=!0}}})]),i("loading-screen",{directives:[{name:"show",rawName:"v-show",value:!t.loaded,expression:"!loaded"}],attrs:{inline:!0,"inline-message":"Loading Image"}})],1)],t.isCropping?i("div",{staticClass:"dvs-blocker dvs-z-30"}):t._e(),t.isCropping?i("div",{staticClass:"dvs-relative dvs-z-40 dvs-bg-black dvs-rounded dvs-shadow-lg"},[i("div",{staticClass:"dvs-flex dvs-bg-gray-900 dvs-p-4 dvs-rounded-t"},[i("button",{staticClass:"dvs-btn dvs-btn-primary dvs-btn-sm dvs-mr-2",on:{click:t.applyCrop}},[t._v(" Apply Crop ")]),i("button",{staticClass:"dvs-btn dvs-mr-2 dvs-btn-ghost dvs-btn-sm dvs-text-white",on:{click:t.cancelCrop}},[t._v(" Remove Crops ")])]),i("div",{staticClass:"dvs-flex dvs-justify-center dvs-w-full"},[i("img",{ref:"croppingimage",staticStyle:{"max-height":"500px"},attrs:{src:t.activeImage.baseImageUrl}})])]):t._e()],2)])])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dvs-bg-red-500 dvs-text-center dvs-rounded dvs-text-white dvs-shadow-lg",staticStyle:{"max-width":"500px",background:"repeating-linear-gradient(45deg, #f6ba52, #f6ba52 10px, #ffd180 10px, #ffd180 20px)"}},[i("h3",{staticClass:"dvs-p-4 dvs-px-8 dvs-uppercase  dvs-border-b dvs-border-white dvs-pb-4 dvs-text-red"},[t._v(" Warning ")]),i("div",{staticClass:"dvs-p-4 dvs-px-8 dvs-rounded-b",staticStyle:{"background-color":"#f6ba52"}},[i("p",[t._v(' The size of your image may not fit the intended location of your developer. If you have chosen "best fit" for your crop or changed the cropping size images may not appear as intended. ')])])])}],n=i(629),r=i(3129),o=i.n(r),l={name:"MediaEditorPreview",components:{LoadingScreen:()=>i.e(524).then(i.bind(i,5480))},props:{sizes:{type:Object,default:null},customSize:{type:Object,default:null},activeImage:{type:Object,required:!0},encodeEdits:{type:Function,required:!0},warning:{type:Boolean,default:!1},active:{type:String,required:!0}},data(){return{cropper:null,loaded:!1}},computed:{...(0,n.rn)("devise",["isCropping"]),aspectRatio(){const t=this.activeImage.name;return this.sizes&&this.sizes[t]?this.sizes[t].w/this.sizes[t].h:this.customSize?this.customSize.w/this.customSize.h:1}},watch:{isCropping(t){t&&this.$nextTick((()=>{this.initializeCropper()}))}},methods:{...(0,n.OI)("devise",["toggleCropping"]),initializeCropper(){const t=this.$refs.croppingimage;this.cropper=new(o())(t,{aspectRatio:this.aspectRatio,maxContainerHeight:"500px"})},applyCrop(){const t=this.cropper.getData(!0);this.$emit("applycrop",t),this.toggleCropping()},cancelCrop(){this.$emit("removecrop"),this.toggleCropping()}}},d=l,c=i(1001),h=(0,c.Z)(d,s,a,!1,null,null,null),u=h.exports},7095:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return h}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{staticClass:"dvs-min-h-screen dvs-fixed dvs-inset-0 dvs-flex dvs-justify-center dvs-items-center dvs-z-60 dvs-text-gray-500"},[i("div",{staticClass:"dvs-blocker dvs-z-30",on:{click:t.close}}),i("div",{staticClass:"media-manager min-w-3/4 dvs-max-h-screenpad dvs-overflow-hidden"},[null===t.defaultImage||t.selectingFile?i("media-selector",{on:{selectSourceFile:t.selectedFile}}):t._e(),t.defaultImage&&"image"===t.defaultImage.type?["undefined"!==typeof t.options&&t.options.sizes?i("div",[i("media-editor",{ref:"sizesmediaeditor",attrs:{"image-settings":t.imageSettings,"default-image":t.defaultImage.url,sizes:t.options.sizes},on:{selectsizeimage:t.selectSizeImage,cancel:t.close,done:t.close,generatedImages:t.setValue}})],1):i("div",[i("media-editor",{attrs:{"image-settings":t.imageSettings,"default-image":t.defaultImage.url},on:{cancel:t.close,done:t.close,generatedImages:t.setValue}})],1)]:t._e()],2)]):t._e()},a=[],n=i(629);const r=i(646);var o={components:{MediaEditor:()=>Promise.all([i.e(953),i.e(383)]).then(i.bind(i,3872)),MediaSelector:()=>Promise.all([i.e(953),i.e(383)]).then(i.bind(i,3474))},data(){return{show:!1,mode:"list",directoryToCreate:"",target:null,callback:null,searchTerms:null,searchResults:[],defaultImage:null,selectingFile:!1,searchResultsLimit:100,currentlyOpenFile:null,options:null,cookieSettings:!1,imageSettings:{}}},computed:{...(0,n.Se)("devise",["files","directories","currentDirectory","searchableMedia"]),currentFiles(){return this.searchResults.length>0?this.searchResults:this.files},uploadHeaders(){const t=document.head.querySelector('meta[name="csrf-token"]');return{"X-CSRF-TOKEN":t.content}}},watch:{loaded(t){!0===t&&this.$nextTick((()=>{this.$refs.search&&this.$refs.search.focus()}))},cookieSettings(t){t||(r.remove("devise-mediamanager-location"),r.remove("devise-mediamanager-mode"))},mode(t){this.cookieSettings&&r.set("devise-mediamanager-mode",t)}},mounted(){this.startOpenerListener()},methods:{setValue(t){"undefined"!==typeof this.target&&(this.target.value=t),"undefined"!==typeof this.callback&&this.callback(t),this.close()},selectedFile(t){null===this.defaultImage&&(this.defaultImage=t),this.selectingFile=!1,this.$nextTick((()=>{this.defaultImage&&"image"===this.defaultImage.type&&"undefined"!==typeof this.options&&this.options.sizes||this.setValue(t.url)}))},startOpenerListener(){window.deviseSettings.$bus.$on("devise-launch-media-manager",(({target:t,callback:e,options:i})=>{this.callback=e,this.target=t,this.options=i,this.show=!0,this.selectingFile=!0})),window.deviseSettings.$bus.$on("devise-launch-media-editor",(({target:t,callback:e,options:i,image:s,settings:a})=>{this.callback=e,this.target=t,this.options=i,this.imageSettings=a,this.defaultImage={url:s,type:"image"},this.show=!0}))},close(){this.selectingFile=!1,this.$set(this,"defaultImage",null),this.imageSettings=Object.assign({}),this.show=!1},selectSizeImage(){this.selectingFile=!0}}},l=o,d=i(1001),c=(0,d.Z)(l,s,a,!1,null,null,null),h=c.exports},3474:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return h}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"media-manager-interface dvs-text-gray-800",staticStyle:{"max-width":"95vw"}},[i("div",{staticClass:"dvs-py-4 dvs-px-8 dvs-rounded-tl dvs-rounded-tr dvs-flex dvs-justify-between dvs-items-center dvs-bg-gray-300 dvs-relative",staticStyle:{"min-height":"70px"}},[i("div",{staticClass:"pr-16"},[""!==t.currentDirectory?i("div",{staticClass:"dvs-flex dvs-justify-between dvs-items-center dvs-font-bold dvs-text-sm dvs-tracking-tight"},[i("breadcrumbs",{attrs:{"current-directory":t.currentDirectory},on:{chooseDirectory:t.changeDirectories}})],1):t._e()]),i("div",{staticClass:"dvs-flex dvs-items-center dvs-text-gray-600"},[i("fieldset",{staticClass:"dvs-fieldset dvs-mr-8"},[i("div",{staticClass:"dvs-flex dvs-items-center"},[i("label",{staticClass:"dvs-mr-2 dvs-my-2"},[t._v("Remember Location?")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.cookieSettings,expression:"cookieSettings"}],staticClass:"dvs-my-2",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.cookieSettings)?t._i(t.cookieSettings,null)>-1:t.cookieSettings},on:{click:t.refreshDirectory,change:function(e){var i=t.cookieSettings,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n=null,r=t._i(i,n);s.checked?r<0&&(t.cookieSettings=i.concat([n])):r>-1&&(t.cookieSettings=i.slice(0,r).concat(i.slice(r+1)))}else t.cookieSettings=a}}})])]),i("fieldset",{staticClass:"dvs-fieldset dvs-mr-8"},[i("div",{staticClass:"dvs-flex dvs-items-center"},[i("label",{staticClass:"dvs-mr-2 dvs-my-2"},[t._v("Contact Sheet")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.mode,expression:"mode"}],staticClass:"dvs-my-2",attrs:{type:"radio",value:"contactSheet"},domProps:{checked:t._q(t.mode,"contactSheet")},on:{change:function(e){t.mode="contactSheet"}}})])]),i("fieldset",{staticClass:"dvs-fieldset dvs-mr-8"},[i("div",{staticClass:"dvs-flex dvs-items-center"},[i("label",{staticClass:"dvs-mr-2 dvs-my-2"},[t._v("Thumbnails")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.mode,expression:"mode"}],staticClass:"dvs-my-2",attrs:{type:"radio",value:"thumbnails"},domProps:{checked:t._q(t.mode,"thumbnails")},on:{change:function(e){t.mode="thumbnails"}}})])]),i("fieldset",{staticClass:"dvs-fieldset"},[i("div",{staticClass:"dvs-flex dvs-items-center"},[i("label",{staticClass:"dvs-mr-2 dvs-my-2"},[t._v("List")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.mode,expression:"mode"}],staticClass:"dvs-my-2",attrs:{type:"radio",value:"list"},domProps:{checked:t._q(t.mode,"list")},on:{change:function(e){t.mode="list"}}})])])])]),i("div",{staticClass:"dvs-flex dvs-items-stretch",staticStyle:{"max-height":"80vh"}},[i("div",{staticClass:"dvs-relative dvs-max-h-full dvs-flex",staticStyle:{"min-width":"300px"}},[i("div",{staticClass:"dvs-h-full dvs-p-8 dvs-bg-gray-400est dvs-flex dvs-flex-col dvs-justify-start dvs-border-r dvs-border-lighter"},[i("form",{on:{submit:function(e){return e.preventDefault(),t.search.apply(null,arguments)}}},[i("div",{staticClass:"dvs-mb-8 flex"},[i("fieldset",{staticClass:"dvs-fieldset dvs-mr-2"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerms,expression:"searchTerms"}],ref:"search",staticClass:"mr-2",attrs:{type:"text",placeholder:"Search"},domProps:{value:t.searchTerms},on:{input:function(e){e.target.composing||(t.searchTerms=e.target.value)}}})]),i("button",{staticClass:"dvs-btn dvs-btn-primary dvs-btn-sm",attrs:{type:"submit"}},[t._v("Search")])])]),i("ul",{staticClass:"dvs-pb-8 dvs-font-bold dvs-text-gray-600 dvs-text-sm dvs-tracking-tight"},[t._l(t.directories,(function(e){return i("li",{key:e.id,staticClass:"dvs-flex items center dvs-cursor-pointer dvs-mt-2 dvs-text-bold",on:{click:function(i){return t.changeDirectories(e.path)}}},[i("folder-icon",{staticClass:"dvs-mr-2"}),t._v(" "+t._s(e.name)+" ")],1)})),t.directories.length<1?i("li",[t._v("No directories within this directory")]):t._e()],2),i("div",{staticClass:"dvs-flex dvs-flex-col"},[i("fieldset",{staticClass:"dvs-fieldset dvs-mb-4"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.directoryToCreate,expression:"directoryToCreate"}],staticClass:"mr-2",attrs:{type:"text",placeholder:"New Directory"},domProps:{value:t.directoryToCreate},on:{input:function(e){e.target.composing||(t.directoryToCreate=e.target.value)}}})]),i("button",{staticClass:"dvs-btn dvs-btn-primary dvs-btn-sm",on:{click:function(e){return t.requestCreateDirectory()}}},[t._v(" Create ")])])])]),i("div",{staticClass:"dvs-flex-grow dvs-relative dvs-overflow-y-scroll dvs-p-4 dvs-pl-16 dvs-max-h-full",class:{"w-full":t.directories.length<1}},[t.searchResults.length>0?i("div",{staticClass:"dvs-p-8 dvs-flex"},[i("h4",[t._v(" Showing up to "+t._s(t.searchResultsLimit)+" results for: "),i("strong",[t._v(t._s(t.searchTerms))])]),i("div",{on:{click:t.closeSearch}},[i("close-icon",{staticClass:"dvs-ml-2 dvs-cursor-pointer",attrs:{w:"30",h:"30"}})],1)]):t.searchableMedia.data.length>0&&null!==t.searchTerms&&""!==t.searchTerms?i("div",{staticClass:"dvs-p-8 dvs-flex"},[i("h4",[t._v(' Hit "Search" for results of: '),i("strong",[t._v(t._s(t.searchTerms))])]),i("div",{on:{click:t.closeSearch}},[i("close-icon",{staticClass:"dvs-ml-2 dvs-cursor-pointer",attrs:{w:"30",h:"30"}})],1)]):t._e(),i("transition",{attrs:{mode:"out-in",name:"dvs-fade"}},[t.loadingDirectory?i("loading-screen",{key:"loadingscreen",attrs:{inline:!0,"inline-message":"Loading Directory"}}):i("uploader",{key:"uploader",attrs:{"current-directory":t.currentDirectory},on:{"all-files-uploaded":t.refreshDirectory}})],1),i("transition",{attrs:{mode:"out-in",name:"dvs-fade"}},[!t.loadingDirectory&&t.currentFiles.length<1&&t.directories.length<1&&""!==t.currentDirectory?i("div",[i("div",{staticClass:"dvs-bg-gray-100 dvs-text-gray-600 dvs-rounded dvs-p-8 dvs-text-center dvs-shadow dvs-cursor-pointer dvs-flex dvs-justify-center dvs-items-center",on:{click:function(e){return t.requestDeleteDirectory()}}},[i("trash-icon",{staticClass:"dvs-mr-2",attrs:{h:"60",w:"60"}}),i("h6",{staticClass:"dvs-text-sm"},[t._v("Delete this directory")])],1)]):t._e()]),i("transition",{attrs:{mode:"out-in",name:"dvs-fade"}},[t.loadingDirectory?t._e():i("div",[t.currentFiles.length<1&&t.directories.length>0&&""!==t.currentDirectory?i("div",{staticClass:"dvs-flex dvs-justify-center dvs-items-center dvs-absolute dvs-absolute-center"},[i("div",{staticClass:"dvs-bg-white dvs-rounded dvs-p-8 dvs--mt-15 dvs-text-center dvs-shadow"},[i("folder-icon",{staticClass:"dvs-text-admin-bg",attrs:{h:"40",w:"40"}}),i("h6",{staticClass:"dvs-mt-2 dvs-text-sm"},[i("span",[t._v("No files in this directory")])])],1)]):t._e(),i("media-selector-files",{attrs:{"current-files":t.currentFiles,mode:t.mode},on:{openFile:t.openFile}}),i("media-selector-open-file",{attrs:{value:t.currentlyOpenFile},on:{fileDeleted:function(e){return t.changeDirectories(t.currentDirectory)},close:function(e){t.currentlyOpenFile=null},selectSourceFile:t.selectSourceFile}})],1)])],1)])])},a=[],n=i(629);const r=i(646);var o={components:{MediaSelectorOpenFile:()=>i.e(565).then(i.bind(i,2704)),MediaSelectorFiles:()=>i.e(565).then(i.bind(i,3425)),Breadcrumbs:()=>Promise.all([i.e(953),i.e(383)]).then(i.bind(i,1436)),Uploader:()=>i.e(524).then(i.bind(i,5826)),LoadingScreen:()=>i.e(524).then(i.bind(i,5480)),FolderIcon:()=>i.e(952).then(i.bind(i,5658)),TrashIcon:()=>i.e(952).then(i.bind(i,4371)),CloseIcon:()=>i.e(952).then(i.bind(i,7583))},data(){return{mode:"thumbnails",directoryToCreate:"",searchTerms:null,searchResults:[],searchResultsLimit:100,currentlyOpenFile:null,cookieSettings:!1,loadingDirectory:!1}},computed:{...(0,n.Se)("devise",["files","directories","currentDirectory","searchableMedia"]),currentFiles(){return this.searchResults.length>0?this.searchResults:this.files},uploadHeaders(){const t=document.head.querySelector('meta[name="csrf-token"]');return{"X-CSRF-TOKEN":t.content}}},watch:{cookieSettings(t){t||r.remove("devise-mediamanager-location")},mode(t){r.set("devise-mediamanager-mode",t)}},mounted(){this.loadInitialLocation(),this.loadInitialMode()},methods:{...(0,n.nv)("devise",["setCurrentDirectory","generateImages","getCurrentFiles","getCurrentDirectories","mediaSearch","deleteFile","createDirectory","deleteDirectory"]),loadInitialLocation(){const t=r.get("devise-mediamanager-location");t?(this.changeDirectories(t),this.cookieSettings=!0):this.changeDirectories("")},loadInitialMode(){const t=r.get("devise-mediamanager-mode");t&&(this.mode=t)},changeDirectories(t){this.loadingDirectory=!0,this.searchTerms=null,this.$set(this,"searchResults",[]),this.setCurrentDirectory(t).then((()=>{this.getCurrentFiles(this.options).then((()=>{this.getCurrentDirectories().then((()=>{this.loadingDirectory=!1,this.cookieSettings&&r.set("devise-mediamanager-location",t)}))}))}))},refreshDirectory(){this.changeDirectories(this.currentDirectory)},uploadError(){window.deviseSettings.$bus.$emit("showError",{title:"Upload Error",message:"There was a problem uploading your file. The file may be too large to be uploaded."})},getUrlParam(t){const e=new RegExp(`(?:[?&]|&)${t}=([^&]+)`,"i"),i=window.location.search.match(e);return i&&i.length>1?i[1]:null},openFile(t){this.currentlyOpenFile&&t.url===this.currentlyOpenFile.url||(this.$set(this,"currentlyOpenFile",t),this.$set(this.currentlyOpenFile,"loaded",!1))},closeFile(){this.$set(this,"currentlyOpenFile",{})},selectSourceFile(t){this.$emit("selectSourceFile",t)},requestCreateDirectory(){const t=this,e=this.directories.filter((e=>e.name===t.directoryToCreate));0===e.length?this.createDirectory({directory:t.currentDirectory,name:t.directoryToCreate}).then((()=>{t.changeDirectories(t.currentDirectory),t.directoryToCreate=""})):window.deviseSettings.$bus.$emit("showError",{title:"Duplicate Name",message:"There was already a directory with this name created in the current location."})},requestDeleteDirectory(){const t=this;this.deleteDirectory(t.currentDirectory).then((()=>{t.changeDirectories("")}))},search(){this.mediaSearch(this.searchTerms).then((t=>{this.searchResults=t,t.length<1&&window.deviseSettings.$bus.$emit("showError",{title:"Hey there",message:`No search results for "${this.searchTerms}"`})}))},closeSearch(){this.searchTerms=null,this.$set(this,"searchResults",[])},close(){this.show=!1,this.imageSettings=Object.assign({}),this.$set(this,"selectedFile",null)}}},l=o,d=i(1001),c=(0,d.Z)(l,s,a,!1,null,null,null),h=c.exports},4666:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return d}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dvs-border-r dvs-border-lighter dvs-bg-gray-200 dvs-p-2 dvs-py-4 ",staticStyle:{width:"50px"}},[i("div",[i("div",{staticClass:"dvs-flex dvs-flex-col"},t._l(t.sizeEdits,(function(e,s){return i("div",{key:s,staticClass:"dvs-text-center dvs-cursor-pointer dvs-mb-3 dvs-rounded",class:{"dvs-bg-black dvs-text-gray-400":t.active===s,"dvs-bg-gray-400":t.active!==s},staticStyle:{width:"100px"}},[t.getWarning(s)?i("div",{staticClass:" dvs-relative",on:{click:function(e){t.showWarning=s}}},[i("div",{staticClass:"dvs-absolute dvs-top-0 dvs-right-0 dvs-rounded-full dvs-p-2 dvs-flex dvs-justify-center dvs-items-center dvs-text-xs dvs-mr-1 dvs-mt-1 dvs-btn-sm dvs-btn-primary"},[i("alert-triangle-icon")],1)]):t._e(),t.getWarning(s)?i("transition",{attrs:{name:"dvs-fade"}},[t.showWarning===s?i("devise-modal",{staticClass:"dvs-z-50 dvs-mx-16",on:{close:function(e){t.showWarning=!1}}},[i("h4",{staticClass:"dvs-mb-4"},[t._v("Warning")]),i("div",{staticClass:"dvs-mb-8",domProps:{innerHTML:t._s(t.getWarning(s))}}),i("button",{staticClass:"dvs-btn dvs-btn-sm dvs-btn-primary",on:{click:function(e){t.showWarning=!1}}},[t._v(" Got It ")])]):t._e()],1):t._e(),i("div",{staticClass:"dvs-overflow-hidden dvs-rounded-t dvs-flex dvs-justify-center dvs-items-center dvs-bg-white",staticStyle:{width:"100px",height:"100px","line-height":"0px"},on:{click:function(e){return t.setActive(s)}}},[i("transition",{attrs:{name:"dvs-fade"}},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.loaded,expression:"loaded"}],attrs:{src:"/styled/preview/"+e.url+"?"+t.encodeEdits(s)},on:{load:function(e){t.loaded=!0}}})]),i("loading-screen",{directives:[{name:"show",rawName:"v-show",value:!t.loaded,expression:"!loaded"}],attrs:{inline:!0,"inline-message":"Loading Image"}})],1),i("div",{staticClass:"dvs-pb-3 dvs-pt-2 dvs-uppercase dvs-w-full",on:{click:function(e){return t.setActive(s)}}},[i("div",{staticClass:"dvs-font-bold dvs-text-xs dvs-mb-1"},[t._v(t._s(s))]),i("div",{staticClass:"dvs-text-2xs"},[t._v("("+t._s(e.w)+"x"+t._s(e.h)+")")])])],1)})),0)])])},a=[],n={name:"MediaEditorThumbnails",components:{DeviseModal:()=>i.e(524).then(i.bind(i,2761)),LoadingScreen:()=>i.e(524).then(i.bind(i,5480)),AlertTriangleIcon:()=>i.e(952).then(i.bind(i,9103))},props:{defaultImage:{type:String,required:!0},sizeEdits:{type:Object,required:!0},sizes:{type:Object,default:null},encodeEdits:{type:Function,required:!0},active:{type:String,required:!0}},data(){return{showWarning:!1,loaded:!1}},methods:{getWarning(t){if(this.sizes){const{warning:e}=this.sizes[t];if(e)return"boolean"===typeof e?'<div class="dvs-flex dvs-flex-col dvs-align-center"><div style="max-width:300px"><p>This image may be presented in a way that this editor cannot clearly represent. Commonly, your developer has placed this warning because however you crop / size this image it will be used as a background image which may need to cover a particular area thereby "hiding" parts of the image.</p></div><p><img src="/devise/img/image-overflow-example.png"></div>':e}return!1},setActive(t){this.$emit("select",t)}}},r=n,o=i(1001),l=(0,o.Z)(r,s,a,!1,null,null,null),d=l.exports},3129:function(t){
/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:17.411Z
 */
(function(e,i){t.exports=i()})(0,(function(){"use strict";function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function e(e){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?t(Object(s),!0).forEach((function(t){r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):t(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function n(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t){return l(t)||d(t)||c(t)||u()}function l(t){if(Array.isArray(t))return h(t)}function d(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function c(t,e){if(t){if("string"===typeof t)return h(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var v="undefined"!==typeof window&&"undefined"!==typeof window.document,p=v?window:{},m=!(!v||!p.document.documentElement)&&"ontouchstart"in p.document.documentElement,g=!!v&&"PointerEvent"in p,f="cropper",b="all",y="crop",w="move",x="zoom",C="e",k="w",_="s",D="n",S="ne",z="nw",M="se",E="sw",I="".concat(f,"-crop"),T="".concat(f,"-disabled"),O="".concat(f,"-hidden"),$="".concat(f,"-hide"),R="".concat(f,"-invisible"),B="".concat(f,"-modal"),N="".concat(f,"-move"),A="".concat(f,"Action"),L="".concat(f,"Preview"),W="crop",j="move",H="none",P="crop",F="cropend",X="cropmove",Y="cropstart",q="dblclick",U=m?"touchstart":"mousedown",Z=m?"touchmove":"mousemove",V=m?"touchend touchcancel":"mouseup",K=g?"pointerdown":U,Q=g?"pointermove":Z,G=g?"pointerup pointercancel":V,J="ready",tt="resize",et="wheel",it="zoom",st="image/jpeg",at=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,nt=/^data:/,rt=/^data:image\/jpeg;base64,/,ot=/^img|canvas$/i,lt=200,dt=100,ct={viewMode:0,dragMode:W,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:lt,minContainerHeight:dt,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},ht='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',ut=Number.isNaN||p.isNaN;function vt(t){return"number"===typeof t&&!ut(t)}var pt=function(t){return t>0&&t<1/0};function mt(t){return"undefined"===typeof t}function gt(t){return"object"===i(t)&&null!==t}var ft=Object.prototype.hasOwnProperty;function bt(t){if(!gt(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&ft.call(i,"isPrototypeOf")}catch(s){return!1}}function yt(t){return"function"===typeof t}var wt=Array.prototype.slice;function xt(t){return Array.from?Array.from(t):wt.call(t)}function Ct(t,e){return t&&yt(e)&&(Array.isArray(t)||vt(t.length)?xt(t).forEach((function(i,s){e.call(t,i,s,t)})):gt(t)&&Object.keys(t).forEach((function(i){e.call(t,t[i],i,t)}))),t}var kt=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return gt(t)&&i.length>0&&i.forEach((function(e){gt(e)&&Object.keys(e).forEach((function(i){t[i]=e[i]}))})),t},_t=/\.\d*(?:0|9){12}\d*$/;function Dt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return _t.test(t)?Math.round(t*e)/e:t}var St=/^width|height|left|top|marginLeft|marginTop$/;function zt(t,e){var i=t.style;Ct(e,(function(t,e){St.test(e)&&vt(t)&&(t="".concat(t,"px")),i[e]=t}))}function Mt(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function Et(t,e){if(e)if(vt(t.length))Ct(t,(function(t){Et(t,e)}));else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function It(t,e){e&&(vt(t.length)?Ct(t,(function(t){It(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function Tt(t,e,i){e&&(vt(t.length)?Ct(t,(function(t){Tt(t,e,i)})):i?Et(t,e):It(t,e))}var Ot=/([a-z\d])([A-Z])/g;function $t(t){return t.replace(Ot,"$1-$2").toLowerCase()}function Rt(t,e){return gt(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat($t(e)))}function Bt(t,e,i){gt(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat($t(e)),i)}function Nt(t,e){if(gt(t[e]))try{delete t[e]}catch(i){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(i){t.dataset[e]=void 0}else t.removeAttribute("data-".concat($t(e)))}var At=/\s\s*/,Lt=function(){var t=!1;if(v){var e=!1,i=function(){},s=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});p.addEventListener("test",i,s),p.removeEventListener("test",i,s)}return t}();function Wt(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i;e.trim().split(At).forEach((function(e){if(!Lt){var n=t.listeners;n&&n[e]&&n[e][i]&&(a=n[e][i],delete n[e][i],0===Object.keys(n[e]).length&&delete n[e],0===Object.keys(n).length&&delete t.listeners)}t.removeEventListener(e,a,s)}))}function jt(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i;e.trim().split(At).forEach((function(e){if(s.once&&!Lt){var n=t.listeners,r=void 0===n?{}:n;a=function(){delete r[e][i],t.removeEventListener(e,a,s);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];i.apply(t,o)},r[e]||(r[e]={}),r[e][i]&&t.removeEventListener(e,r[e][i],s),r[e][i]=a,t.listeners=r}t.addEventListener(e,a,s)}))}function Ht(t,e,i){var s;return yt(Event)&&yt(CustomEvent)?s=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(s=document.createEvent("CustomEvent"),s.initCustomEvent(e,!0,!0,i)),t.dispatchEvent(s)}function Pt(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ft=p.location,Xt=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Yt(t){var e=t.match(Xt);return null!==e&&(e[1]!==Ft.protocol||e[2]!==Ft.hostname||e[3]!==Ft.port)}function qt(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function Ut(t){var e=t.rotate,i=t.scaleX,s=t.scaleY,a=t.translateX,n=t.translateY,r=[];vt(a)&&0!==a&&r.push("translateX(".concat(a,"px)")),vt(n)&&0!==n&&r.push("translateY(".concat(n,"px)")),vt(e)&&0!==e&&r.push("rotate(".concat(e,"deg)")),vt(i)&&1!==i&&r.push("scaleX(".concat(i,")")),vt(s)&&1!==s&&r.push("scaleY(".concat(s,")"));var o=r.length?r.join(" "):"none";return{WebkitTransform:o,msTransform:o,transform:o}}function Zt(t){var i=e({},t),s=0;return Ct(t,(function(t,e){delete i[e],Ct(i,(function(e){var i=Math.abs(t.startX-e.startX),a=Math.abs(t.startY-e.startY),n=Math.abs(t.endX-e.endX),r=Math.abs(t.endY-e.endY),o=Math.sqrt(i*i+a*a),l=Math.sqrt(n*n+r*r),d=(l-o)/o;Math.abs(d)>Math.abs(s)&&(s=d)}))})),s}function Vt(t,i){var s=t.pageX,a=t.pageY,n={endX:s,endY:a};return i?n:e({startX:s,startY:a},n)}function Kt(t){var e=0,i=0,s=0;return Ct(t,(function(t){var a=t.startX,n=t.startY;e+=a,i+=n,s+=1})),e/=s,i/=s,{pageX:e,pageY:i}}function Qt(t){var e=t.aspectRatio,i=t.height,s=t.width,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",n=pt(s),r=pt(i);if(n&&r){var o=i*e;"contain"===a&&o>s||"cover"===a&&o<s?i=s/e:s=i*e}else n?i=s/e:r&&(s=i*e);return{width:s,height:i}}function Gt(t){var e=t.width,i=t.height,s=t.degree;if(s=Math.abs(s)%180,90===s)return{width:i,height:e};var a=s%90*Math.PI/180,n=Math.sin(a),r=Math.cos(a),o=e*r+i*n,l=e*n+i*r;return s>90?{width:l,height:o}:{width:o,height:l}}function Jt(t,e,i,s){var a=e.aspectRatio,n=e.naturalWidth,r=e.naturalHeight,l=e.rotate,d=void 0===l?0:l,c=e.scaleX,h=void 0===c?1:c,u=e.scaleY,v=void 0===u?1:u,p=i.aspectRatio,m=i.naturalWidth,g=i.naturalHeight,f=s.fillColor,b=void 0===f?"transparent":f,y=s.imageSmoothingEnabled,w=void 0===y||y,x=s.imageSmoothingQuality,C=void 0===x?"low":x,k=s.maxWidth,_=void 0===k?1/0:k,D=s.maxHeight,S=void 0===D?1/0:D,z=s.minWidth,M=void 0===z?0:z,E=s.minHeight,I=void 0===E?0:E,T=document.createElement("canvas"),O=T.getContext("2d"),$=Qt({aspectRatio:p,width:_,height:S}),R=Qt({aspectRatio:p,width:M,height:I},"cover"),B=Math.min($.width,Math.max(R.width,m)),N=Math.min($.height,Math.max(R.height,g)),A=Qt({aspectRatio:a,width:_,height:S}),L=Qt({aspectRatio:a,width:M,height:I},"cover"),W=Math.min(A.width,Math.max(L.width,n)),j=Math.min(A.height,Math.max(L.height,r)),H=[-W/2,-j/2,W,j];return T.width=Dt(B),T.height=Dt(N),O.fillStyle=b,O.fillRect(0,0,B,N),O.save(),O.translate(B/2,N/2),O.rotate(d*Math.PI/180),O.scale(h,v),O.imageSmoothingEnabled=w,O.imageSmoothingQuality=C,O.drawImage.apply(O,[t].concat(o(H.map((function(t){return Math.floor(Dt(t))}))))),O.restore(),T}var te=String.fromCharCode;function ee(t,e,i){var s="";i+=e;for(var a=e;a<i;a+=1)s+=te(t.getUint8(a));return s}var ie=/^data:.*,/;function se(t){var e=t.replace(ie,""),i=atob(e),s=new ArrayBuffer(i.length),a=new Uint8Array(s);return Ct(a,(function(t,e){a[e]=i.charCodeAt(e)})),s}function ae(t,e){var i=[],s=8192,a=new Uint8Array(t);while(a.length>0)i.push(te.apply(null,xt(a.subarray(0,s)))),a=a.subarray(s);return"data:".concat(e,";base64,").concat(btoa(i.join("")))}function ne(t){var e,i=new DataView(t);try{var s,a,n;if(255===i.getUint8(0)&&216===i.getUint8(1)){var r=i.byteLength,o=2;while(o+1<r){if(255===i.getUint8(o)&&225===i.getUint8(o+1)){a=o;break}o+=1}}if(a){var l=a+4,d=a+10;if("Exif"===ee(i,l,4)){var c=i.getUint16(d);if(s=18761===c,(s||19789===c)&&42===i.getUint16(d+2,s)){var h=i.getUint32(d+4,s);h>=8&&(n=d+h)}}}if(n){var u,v,p=i.getUint16(n,s);for(v=0;v<p;v+=1)if(u=n+12*v+2,274===i.getUint16(u,s)){u+=8,e=i.getUint16(u,s),i.setUint16(u,1,s);break}}}catch(m){e=1}return e}function re(t){var e=0,i=1,s=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:s=-1;break;case 5:e=90,s=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:i,scaleY:s}}var oe={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,s=this.cropper,a=Number(e.minContainerWidth),n=Number(e.minContainerHeight);Et(s,O),It(t,O);var r={width:Math.max(i.offsetWidth,a>=0?a:lt),height:Math.max(i.offsetHeight,n>=0?n:dt)};this.containerData=r,zt(s,{width:r.width,height:r.height}),Et(t,O),It(s,O)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,s=Math.abs(e.rotate)%180===90,a=s?e.naturalHeight:e.naturalWidth,n=s?e.naturalWidth:e.naturalHeight,r=a/n,o=t.width,l=t.height;t.height*r>t.width?3===i?o=t.height*r:l=t.width/r:3===i?l=t.width/r:o=t.height*r;var d={aspectRatio:r,naturalWidth:a,naturalHeight:n,width:o,height:l};this.canvasData=d,this.limited=1===i||2===i,this.limitCanvas(!0,!0),d.width=Math.min(Math.max(d.width,d.minWidth),d.maxWidth),d.height=Math.min(Math.max(d.height,d.minHeight),d.maxHeight),d.left=(t.width-d.width)/2,d.top=(t.height-d.height)/2,d.oldLeft=d.left,d.oldTop=d.top,this.initialCanvasData=kt({},d)},limitCanvas:function(t,e){var i=this.options,s=this.containerData,a=this.canvasData,n=this.cropBoxData,r=i.viewMode,o=a.aspectRatio,l=this.cropped&&n;if(t){var d=Number(i.minCanvasWidth)||0,c=Number(i.minCanvasHeight)||0;r>1?(d=Math.max(d,s.width),c=Math.max(c,s.height),3===r&&(c*o>d?d=c*o:c=d/o)):r>0&&(d?d=Math.max(d,l?n.width:0):c?c=Math.max(c,l?n.height:0):l&&(d=n.width,c=n.height,c*o>d?d=c*o:c=d/o));var h=Qt({aspectRatio:o,width:d,height:c});d=h.width,c=h.height,a.minWidth=d,a.minHeight=c,a.maxWidth=1/0,a.maxHeight=1/0}if(e)if(r>(l?0:1)){var u=s.width-a.width,v=s.height-a.height;a.minLeft=Math.min(0,u),a.minTop=Math.min(0,v),a.maxLeft=Math.max(0,u),a.maxTop=Math.max(0,v),l&&this.limited&&(a.minLeft=Math.min(n.left,n.left+(n.width-a.width)),a.minTop=Math.min(n.top,n.top+(n.height-a.height)),a.maxLeft=n.left,a.maxTop=n.top,2===r&&(a.width>=s.width&&(a.minLeft=Math.min(0,u),a.maxLeft=Math.max(0,u)),a.height>=s.height&&(a.minTop=Math.min(0,v),a.maxTop=Math.max(0,v))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=s.width,a.maxTop=s.height},renderCanvas:function(t,e){var i=this.canvasData,s=this.imageData;if(e){var a=Gt({width:s.naturalWidth*Math.abs(s.scaleX||1),height:s.naturalHeight*Math.abs(s.scaleY||1),degree:s.rotate||0}),n=a.width,r=a.height,o=i.width*(n/i.naturalWidth),l=i.height*(r/i.naturalHeight);i.left-=(o-i.width)/2,i.top-=(l-i.height)/2,i.width=o,i.height=l,i.aspectRatio=n/r,i.naturalWidth=n,i.naturalHeight=r,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,zt(this.canvas,kt({width:i.width,height:i.height},Ut({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,s=i.naturalWidth*(e.width/e.naturalWidth),a=i.naturalHeight*(e.height/e.naturalHeight);kt(i,{width:s,height:a,left:(e.width-s)/2,top:(e.height-a)/2}),zt(this.image,kt({width:i.width,height:i.height},Ut(kt({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,s=Number(t.autoCropArea)||.8,a={width:e.width,height:e.height};i&&(e.height*i>e.width?a.height=a.width/i:a.width=a.height*i),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*s),a.height=Math.max(a.minHeight,a.height*s),a.left=e.left+(e.width-a.width)/2,a.top=e.top+(e.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=kt({},a)},limitCropBox:function(t,e){var i=this.options,s=this.containerData,a=this.canvasData,n=this.cropBoxData,r=this.limited,o=i.aspectRatio;if(t){var l=Number(i.minCropBoxWidth)||0,d=Number(i.minCropBoxHeight)||0,c=r?Math.min(s.width,a.width,a.width+a.left,s.width-a.left):s.width,h=r?Math.min(s.height,a.height,a.height+a.top,s.height-a.top):s.height;l=Math.min(l,s.width),d=Math.min(d,s.height),o&&(l&&d?d*o>l?d=l/o:l=d*o:l?d=l/o:d&&(l=d*o),h*o>c?h=c/o:c=h*o),n.minWidth=Math.min(l,c),n.minHeight=Math.min(d,h),n.maxWidth=c,n.maxHeight=h}e&&(r?(n.minLeft=Math.max(0,a.left),n.minTop=Math.max(0,a.top),n.maxLeft=Math.min(s.width,a.left+a.width)-n.width,n.maxTop=Math.min(s.height,a.top+a.height)-n.height):(n.minLeft=0,n.minTop=0,n.maxLeft=s.width-n.width,n.maxTop=s.height-n.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&Bt(this.face,A,i.width>=e.width&&i.height>=e.height?w:b),zt(this.cropBox,kt({width:i.width,height:i.height},Ut({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ht(this.element,P,this.getData())}},le={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,s=e?this.crossOriginUrl:this.url,a=t.alt||"The image to preview",n=document.createElement("img");if(e&&(n.crossOrigin=e),n.src=s,n.alt=a,this.viewBox.appendChild(n),this.viewBoxImage=n,i){var r=i;"string"===typeof i?r=t.ownerDocument.querySelectorAll(i):i.querySelector&&(r=[i]),this.previews=r,Ct(r,(function(t){var i=document.createElement("img");Bt(t,L,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(i.crossOrigin=e),i.src=s,i.alt=a,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(i)}))}},resetPreview:function(){Ct(this.previews,(function(t){var e=Rt(t,L);zt(t,{width:e.width,height:e.height}),t.innerHTML=e.html,Nt(t,L)}))},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,s=i.width,a=i.height,n=t.width,r=t.height,o=i.left-e.left-t.left,l=i.top-e.top-t.top;this.cropped&&!this.disabled&&(zt(this.viewBoxImage,kt({width:n,height:r},Ut(kt({translateX:-o,translateY:-l},t)))),Ct(this.previews,(function(e){var i=Rt(e,L),d=i.width,c=i.height,h=d,u=c,v=1;s&&(v=d/s,u=a*v),a&&u>c&&(v=c/a,h=s*v,u=c),zt(e,{width:h,height:u}),zt(e.getElementsByTagName("img")[0],kt({width:n*v,height:r*v},Ut(kt({translateX:-o*v,translateY:-l*v},t))))})))}},de={bind:function(){var t=this.element,e=this.options,i=this.cropper;yt(e.cropstart)&&jt(t,Y,e.cropstart),yt(e.cropmove)&&jt(t,X,e.cropmove),yt(e.cropend)&&jt(t,F,e.cropend),yt(e.crop)&&jt(t,P,e.crop),yt(e.zoom)&&jt(t,it,e.zoom),jt(i,K,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&jt(i,et,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&jt(i,q,this.onDblclick=this.dblclick.bind(this)),jt(t.ownerDocument,Q,this.onCropMove=this.cropMove.bind(this)),jt(t.ownerDocument,G,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&jt(window,tt,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;yt(e.cropstart)&&Wt(t,Y,e.cropstart),yt(e.cropmove)&&Wt(t,X,e.cropmove),yt(e.cropend)&&Wt(t,F,e.cropend),yt(e.crop)&&Wt(t,P,e.crop),yt(e.zoom)&&Wt(t,it,e.zoom),Wt(i,K,this.onCropStart),e.zoomable&&e.zoomOnWheel&&Wt(i,et,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Wt(i,q,this.onDblclick),Wt(t.ownerDocument,Q,this.onCropMove),Wt(t.ownerDocument,G,this.onCropEnd),e.responsive&&Wt(window,tt,this.onResize)}},ce={resize:function(){if(!this.disabled){var t,e,i=this.options,s=this.container,a=this.containerData,n=s.offsetWidth/a.width,r=s.offsetHeight/a.height,o=Math.abs(n-1)>Math.abs(r-1)?n:r;if(1!==o)i.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(Ct(t,(function(e,i){t[i]=e*o}))),this.setCropBoxData(Ct(e,(function(t,i){e[i]=t*o}))))}},dblclick:function(){this.disabled||this.options.dragMode===H||this.setDragMode(Mt(this.dragBox,I)?j:W)},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,s=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?s=t.deltaY>0?1:-1:t.wheelDelta?s=-t.wheelDelta/120:t.detail&&(s=t.detail>0?1:-1),this.zoom(-s*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(vt(e)&&1!==e||vt(i)&&0!==i||t.ctrlKey))){var s,a=this.options,n=this.pointers;t.changedTouches?Ct(t.changedTouches,(function(t){n[t.identifier]=Vt(t)})):n[t.pointerId||0]=Vt(t),s=Object.keys(n).length>1&&a.zoomable&&a.zoomOnTouch?x:Rt(t.target,A),at.test(s)&&!1!==Ht(this.element,Y,{originalEvent:t,action:s})&&(t.preventDefault(),this.action=s,this.cropping=!1,s===y&&(this.cropping=!0,Et(this.dragBox,B)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),!1!==Ht(this.element,X,{originalEvent:t,action:e})&&(t.changedTouches?Ct(t.changedTouches,(function(t){kt(i[t.identifier]||{},Vt(t,!0))})):kt(i[t.pointerId||0]||{},Vt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?Ct(t.changedTouches,(function(t){delete i[t.identifier]})):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,Tt(this.dragBox,B,this.cropped&&this.options.modal)),Ht(this.element,F,{originalEvent:t,action:e}))}}},he={change:function(t){var e,i=this.options,s=this.canvasData,a=this.containerData,n=this.cropBoxData,r=this.pointers,o=this.action,l=i.aspectRatio,d=n.left,c=n.top,h=n.width,u=n.height,v=d+h,p=c+u,m=0,g=0,f=a.width,I=a.height,T=!0;!l&&t.shiftKey&&(l=h&&u?h/u:1),this.limited&&(m=n.minLeft,g=n.minTop,f=m+Math.min(a.width,s.width,s.left+s.width),I=g+Math.min(a.height,s.height,s.top+s.height));var $=r[Object.keys(r)[0]],R={x:$.endX-$.startX,y:$.endY-$.startY},B=function(t){switch(t){case C:v+R.x>f&&(R.x=f-v);break;case k:d+R.x<m&&(R.x=m-d);break;case D:c+R.y<g&&(R.y=g-c);break;case _:p+R.y>I&&(R.y=I-p);break}};switch(o){case b:d+=R.x,c+=R.y;break;case C:if(R.x>=0&&(v>=f||l&&(c<=g||p>=I))){T=!1;break}B(C),h+=R.x,h<0&&(o=k,h=-h,d-=h),l&&(u=h/l,c+=(n.height-u)/2);break;case D:if(R.y<=0&&(c<=g||l&&(d<=m||v>=f))){T=!1;break}B(D),u-=R.y,c+=R.y,u<0&&(o=_,u=-u,c-=u),l&&(h=u*l,d+=(n.width-h)/2);break;case k:if(R.x<=0&&(d<=m||l&&(c<=g||p>=I))){T=!1;break}B(k),h-=R.x,d+=R.x,h<0&&(o=C,h=-h,d-=h),l&&(u=h/l,c+=(n.height-u)/2);break;case _:if(R.y>=0&&(p>=I||l&&(d<=m||v>=f))){T=!1;break}B(_),u+=R.y,u<0&&(o=D,u=-u,c-=u),l&&(h=u*l,d+=(n.width-h)/2);break;case S:if(l){if(R.y<=0&&(c<=g||v>=f)){T=!1;break}B(D),u-=R.y,c+=R.y,h=u*l}else B(D),B(C),R.x>=0?v<f?h+=R.x:R.y<=0&&c<=g&&(T=!1):h+=R.x,R.y<=0?c>g&&(u-=R.y,c+=R.y):(u-=R.y,c+=R.y);h<0&&u<0?(o=E,u=-u,h=-h,c-=u,d-=h):h<0?(o=z,h=-h,d-=h):u<0&&(o=M,u=-u,c-=u);break;case z:if(l){if(R.y<=0&&(c<=g||d<=m)){T=!1;break}B(D),u-=R.y,c+=R.y,h=u*l,d+=n.width-h}else B(D),B(k),R.x<=0?d>m?(h-=R.x,d+=R.x):R.y<=0&&c<=g&&(T=!1):(h-=R.x,d+=R.x),R.y<=0?c>g&&(u-=R.y,c+=R.y):(u-=R.y,c+=R.y);h<0&&u<0?(o=M,u=-u,h=-h,c-=u,d-=h):h<0?(o=S,h=-h,d-=h):u<0&&(o=E,u=-u,c-=u);break;case E:if(l){if(R.x<=0&&(d<=m||p>=I)){T=!1;break}B(k),h-=R.x,d+=R.x,u=h/l}else B(_),B(k),R.x<=0?d>m?(h-=R.x,d+=R.x):R.y>=0&&p>=I&&(T=!1):(h-=R.x,d+=R.x),R.y>=0?p<I&&(u+=R.y):u+=R.y;h<0&&u<0?(o=S,u=-u,h=-h,c-=u,d-=h):h<0?(o=M,h=-h,d-=h):u<0&&(o=z,u=-u,c-=u);break;case M:if(l){if(R.x>=0&&(v>=f||p>=I)){T=!1;break}B(C),h+=R.x,u=h/l}else B(_),B(C),R.x>=0?v<f?h+=R.x:R.y>=0&&p>=I&&(T=!1):h+=R.x,R.y>=0?p<I&&(u+=R.y):u+=R.y;h<0&&u<0?(o=z,u=-u,h=-h,c-=u,d-=h):h<0?(o=E,h=-h,d-=h):u<0&&(o=S,u=-u,c-=u);break;case w:this.move(R.x,R.y),T=!1;break;case x:this.zoom(Zt(r),t),T=!1;break;case y:if(!R.x||!R.y){T=!1;break}e=Pt(this.cropper),d=$.startX-e.left,c=$.startY-e.top,h=n.minWidth,u=n.minHeight,R.x>0?o=R.y>0?M:S:R.x<0&&(d-=h,o=R.y>0?E:z),R.y<0&&(c-=u),this.cropped||(It(this.cropBox,O),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}T&&(n.width=h,n.height=u,n.left=d,n.top=c,this.action=o,this.renderCropBox()),Ct(r,(function(t){t.startX=t.endX,t.startY=t.endY}))}},ue={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Et(this.dragBox,B),It(this.cropBox,O),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=kt({},this.initialImageData),this.canvasData=kt({},this.initialCanvasData),this.cropBoxData=kt({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(kt(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),It(this.dragBox,B),Et(this.cropBox,O)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,Ct(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,It(this.cropper,T)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Et(this.cropper,T)),this},destroy:function(){var t=this.element;return t[f]?(t[f]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,s=i.left,a=i.top;return this.moveTo(mt(t)?t:s+Number(t),mt(e)?e:a+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,s=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(vt(t)&&(i.left=t,s=!0),vt(e)&&(i.top=e,s=!0),s&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=Number(t),t=t<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var s=this.options,a=this.canvasData,n=a.width,r=a.height,o=a.naturalWidth,l=a.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&s.zoomable){var d=o*t,c=l*t;if(!1===Ht(this.element,it,{ratio:t,oldRatio:n/o,originalEvent:i}))return this;if(i){var h=this.pointers,u=Pt(this.cropper),v=h&&Object.keys(h).length?Kt(h):{pageX:i.pageX,pageY:i.pageY};a.left-=(d-n)*((v.pageX-u.left-a.left)/n),a.top-=(c-r)*((v.pageY-u.top-a.top)/r)}else bt(e)&&vt(e.x)&&vt(e.y)?(a.left-=(d-n)*((e.x-a.left)/n),a.top-=(c-r)*((e.y-a.top)/r)):(a.left-=(d-n)/2,a.top-=(c-r)/2);a.width=d,a.height=c,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),vt(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,vt(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(vt(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,s=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(vt(t)&&(i.scaleX=t,s=!0),vt(e)&&(i.scaleY=e,s=!0),s&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,s=this.imageData,a=this.canvasData,n=this.cropBoxData;if(this.ready&&this.cropped){t={x:n.left-a.left,y:n.top-a.top,width:n.width,height:n.height};var r=s.width/s.naturalWidth;if(Ct(t,(function(e,i){t[i]=e/r})),e){var o=Math.round(t.y+t.height),l=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=l-t.x,t.height=o-t.y}}else t={x:0,y:0,width:0,height:0};return i.rotatable&&(t.rotate=s.rotate||0),i.scalable&&(t.scaleX=s.scaleX||1,t.scaleY=s.scaleY||1),t},setData:function(t){var e=this.options,i=this.imageData,s=this.canvasData,a={};if(this.ready&&!this.disabled&&bt(t)){var n=!1;e.rotatable&&vt(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,n=!0),e.scalable&&(vt(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,n=!0),vt(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,n=!0)),n&&this.renderCanvas(!0,!0);var r=i.width/i.naturalWidth;vt(t.x)&&(a.left=t.x*r+s.left),vt(t.y)&&(a.top=t.y*r+s.top),vt(t.width)&&(a.width=t.width*r),vt(t.height)&&(a.height=t.height*r),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?kt({},this.containerData):{}},getImageData:function(){return this.sized?kt({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&Ct(["left","top","width","height","naturalWidth","naturalHeight"],(function(i){e[i]=t[i]})),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&bt(t)&&(vt(t.left)&&(e.left=t.left),vt(t.top)&&(e.top=t.top),vt(t.width)?(e.width=t.width,e.height=t.width/i):vt(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,s=this.cropBoxData,a=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&bt(t)&&(vt(t.left)&&(s.left=t.left),vt(t.top)&&(s.top=t.top),vt(t.width)&&t.width!==s.width&&(e=!0,s.width=t.width),vt(t.height)&&t.height!==s.height&&(i=!0,s.height=t.height),a&&(e?s.height=s.width/a:i&&(s.width=s.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=Jt(this.image,this.imageData,e,t);if(!this.cropped)return i;var s=this.getData(),a=s.x,n=s.y,r=s.width,l=s.height,d=i.width/Math.floor(e.naturalWidth);1!==d&&(a*=d,n*=d,r*=d,l*=d);var c=r/l,h=Qt({aspectRatio:c,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),u=Qt({aspectRatio:c,width:t.minWidth||0,height:t.minHeight||0},"cover"),v=Qt({aspectRatio:c,width:t.width||(1!==d?i.width:r),height:t.height||(1!==d?i.height:l)}),p=v.width,m=v.height;p=Math.min(h.width,Math.max(u.width,p)),m=Math.min(h.height,Math.max(u.height,m));var g=document.createElement("canvas"),f=g.getContext("2d");g.width=Dt(p),g.height=Dt(m),f.fillStyle=t.fillColor||"transparent",f.fillRect(0,0,p,m);var b=t.imageSmoothingEnabled,y=void 0===b||b,w=t.imageSmoothingQuality;f.imageSmoothingEnabled=y,w&&(f.imageSmoothingQuality=w);var x,C,k,_,D,S,z=i.width,M=i.height,E=a,I=n;E<=-r||E>z?(E=0,x=0,k=0,D=0):E<=0?(k=-E,E=0,x=Math.min(z,r+E),D=x):E<=z&&(k=0,x=Math.min(r,z-E),D=x),x<=0||I<=-l||I>M?(I=0,C=0,_=0,S=0):I<=0?(_=-I,I=0,C=Math.min(M,l+I),S=C):I<=M&&(_=0,C=Math.min(l,M-I),S=C);var T=[E,I,x,C];if(D>0&&S>0){var O=p/r;T.push(k*O,_*O,D*O,S*O)}return f.drawImage.apply(f,[i].concat(o(T.map((function(t){return Math.floor(Dt(t))}))))),g},setAspectRatio:function(t){var e=this.options;return this.disabled||mt(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,s=this.face;if(this.ready&&!this.disabled){var a=t===W,n=e.movable&&t===j;t=a||n?t:H,e.dragMode=t,Bt(i,A,t),Tt(i,I,a),Tt(i,N,n),e.cropBoxMovable||(Bt(s,A,t),Tt(s,I,a),Tt(s,N,n))}return this}},ve=p.Cropper,pe=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(s(this,t),!e||!ot.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=kt({},ct,bt(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return n(t,[{key:"init",value:function(){var t,e=this.element,i=e.tagName.toLowerCase();if(!e[f]){if(e[f]=this,"img"===i){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===i&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var i=this.element,s=this.options;if(s.rotatable||s.scalable||(s.checkOrientation=!1),s.checkOrientation&&window.ArrayBuffer)if(nt.test(t))rt.test(t)?this.read(se(t)):this.clone();else{var a=new XMLHttpRequest,n=this.clone.bind(this);this.reloading=!0,this.xhr=a,a.onabort=n,a.onerror=n,a.ontimeout=n,a.onprogress=function(){a.getResponseHeader("content-type")!==st&&a.abort()},a.onload=function(){e.read(a.response)},a.onloadend=function(){e.reloading=!1,e.xhr=null},s.checkCrossOrigin&&Yt(t)&&i.crossOrigin&&(t=qt(t)),a.open("GET",t,!0),a.responseType="arraybuffer",a.withCredentials="use-credentials"===i.crossOrigin,a.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,i=this.imageData,s=ne(t),a=0,n=1,r=1;if(s>1){this.url=ae(t,st);var o=re(s);a=o.rotate,n=o.scaleX,r=o.scaleY}e.rotatable&&(i.rotate=a),e.scalable&&(i.scaleX=n,i.scaleY=r),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,i=t.crossOrigin,s=e;this.options.checkCrossOrigin&&Yt(e)&&(i||(i="anonymous"),s=qt(e)),this.crossOrigin=i,this.crossOriginUrl=s;var a=document.createElement("img");i&&(a.crossOrigin=i),a.src=s||e,a.alt=t.alt||"The image to crop",this.image=a,a.onload=this.start.bind(this),a.onerror=this.stop.bind(this),Et(a,$),t.parentNode.insertBefore(a,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var i=p.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(p.navigator.userAgent),s=function(e,i){kt(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.initialImageData=kt({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||i){var a=document.createElement("img"),n=document.body||document.documentElement;this.sizingImage=a,a.onload=function(){s(a.width,a.height),i||n.removeChild(a)},a.src=e.src,i||(a.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",n.appendChild(a))}else s(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,i=this.image,s=t.parentNode,a=document.createElement("div");a.innerHTML=ht;var n=a.querySelector(".".concat(f,"-container")),r=n.querySelector(".".concat(f,"-canvas")),o=n.querySelector(".".concat(f,"-drag-box")),l=n.querySelector(".".concat(f,"-crop-box")),d=l.querySelector(".".concat(f,"-face"));this.container=s,this.cropper=n,this.canvas=r,this.dragBox=o,this.cropBox=l,this.viewBox=n.querySelector(".".concat(f,"-view-box")),this.face=d,r.appendChild(i),Et(t,O),s.insertBefore(n,t.nextSibling),this.isImg||It(i,$),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,Et(l,O),e.guides||Et(l.getElementsByClassName("".concat(f,"-dashed")),O),e.center||Et(l.getElementsByClassName("".concat(f,"-center")),O),e.background&&Et(n,"".concat(f,"-bg")),e.highlight||Et(d,R),e.cropBoxMovable&&(Et(d,N),Bt(d,A,b)),e.cropBoxResizable||(Et(l.getElementsByClassName("".concat(f,"-line")),O),Et(l.getElementsByClassName("".concat(f,"-point")),O)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),yt(e.ready)&&jt(t,J,e.ready,{once:!0}),Ht(t,J)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),It(this.element,O))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=ve,t}},{key:"setDefaults",value:function(t){kt(ct,bt(t)&&t)}}]),t}();return kt(pe.prototype,oe,le,de,ce,he,ue),pe}))},646:function(t){(function(e,i){t.exports=i()})(0,(function(){"use strict";function t(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)t[s]=i[s]}return t}var e={read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function i(e,s){function a(i,a,n){if("undefined"!==typeof document){n=t({},s,n),"number"===typeof n.expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var o in n)n[o]&&(r+="; "+o,!0!==n[o]&&(r+="="+n[o].split(";")[0]));return document.cookie=i+"="+e.write(a,i)+r}}function n(t){if("undefined"!==typeof document&&(!arguments.length||t)){for(var i=document.cookie?document.cookie.split("; "):[],s={},a=0;a<i.length;a++){var n=i[a].split("="),r=n.slice(1).join("=");try{var o=decodeURIComponent(n[0]);if(s[o]=e.read(r,o),t===o)break}catch(l){}}return t?s[t]:s}}return Object.create({set:a,get:n,remove:function(e,i){a(e,"",t({},i,{expires:-1}))},withAttributes:function(e){return i(this.converter,t({},this.attributes,e))},withConverter:function(e){return i(t({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(s)},converter:{value:Object.freeze(e)}})}var s=i(e,{path:"/"});return s}))}}]);
//# sourceMappingURL=devise-media.279f0b34.js.map